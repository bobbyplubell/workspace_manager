[pytest]
minversion = 7.0

# Generous timeouts because Splunk container first-run can be slow (image pulls, provisioning, etc.)
timeout = 1800
timeout_method = thread
faulthandler_timeout = 1800

# Discover tests only within this project
testpaths =
    tests

# Register custom markers used by this project
markers =
    integration: mark tests as integration (may use external services or be slower)
    slow: mark tests as slow-running
    smoke: mark tests as smoke/basic checks
    e2e: mark tests as end-to-end system checks
    unit: mark tests as unit-level checks
    docker: mark tests that require Docker (SDK + reachable daemon)
    docker_env: mark tests that should use a session-scoped Splunk Docker container (shared across tests)
    docker_interactive: mark interactive Docker tests that execute commands inside the container

# Docker test control is managed via environment variables:
#   - DOCKER_BASE_URL / DOCKER_HOST         -> point to a remote Docker daemon (e.g., tcp://host:2376)
#   - DOCKER_TLS_VERIFY, DOCKER_CERT_PATH   -> enable TLS to remote Docker
#   - DOCKER_CLIENT_TIMEOUT                 -> increase Docker SDK client timeout (e.g., 1200)
#   - PYTEST_DOCKER_START_TIMEOUT           -> optional; increase startup timeout if using external docker fixtures

# Silence deprecation warnings from older hook signatures used in test harnesses.
filterwarnings =
    ignore::pytest.PytestRemovedIn9Warning
    ignore::urllib3.exceptions.InsecureRequestWarning
